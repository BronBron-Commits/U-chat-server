# Cargo configuration for ESP32 firmware
# ============================================================================
# Target Architecture
# ============================================================================

[build]
# Default target: ESP32 (Xtensa architecture)
# Change this based on your ESP32 variant:
#   - ESP32:    xtensa-esp32-espidf
#   - ESP32-S2: xtensa-esp32s2-espidf
#   - ESP32-S3: xtensa-esp32s3-espidf
#   - ESP32-C3: riscv32imc-esp-espidf
#   - ESP32-C6: riscv32imac-esp-espidf
target = "xtensa-esp32-espidf"

[target.xtensa-esp32-espidf]
# Linker configuration
linker = "ldproxy"
# Use espflash for direct flashing
runner = "espflash flash --monitor"

[target.xtensa-esp32s2-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor"

[target.xtensa-esp32s3-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor"

[target.riscv32imc-esp-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor"

[target.riscv32imac-esp-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor"

# ============================================================================
# Environment Variables
# ============================================================================

[env]
# ESP-IDF configuration
ESP_IDF_VERSION = "v5.2"
ESP_IDF_TOOLS_INSTALL_DIR = "global"

# MCU configuration (set for your specific chip)
MCU = "esp32"

# Build configuration
# Set these via .env file or environment for secrets
# WIFI_SSID = "your-ssid"
# WIFI_PASSWORD = "your-password"
# DEVICE_API_KEY = "your-device-key"
# DEVICE_ID = "device-001"

# ============================================================================
# Unstable Features
# ============================================================================

[unstable]
# Enable build-std for embedded targets
build-std = ["std", "panic_abort"]

# ============================================================================
# Aliases
# ============================================================================

[alias]
# Build release firmware
br = "build --release"

# Flash and monitor
fm = "run --release"

# Size analysis
size = "size --release"
